generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model agendas {
  id              Int      @id @default(autoincrement())
  lojaId          Int
  productId       Int
  usuarioId       Int?
  dataHora        DateTime
  descricao       String?
  status          String   @default("disponivel")
  isActive        Boolean  @default(true)
  dataCriacao     DateTime @default(now())
  dataAtualizacao DateTime
}

model anuncios {
  id               Int               @id @default(autoincrement())
  lojaId           Int
  titulo           String            @db.VarChar(50)
  descricao        String?
  categoria        String?           @db.VarChar(50)
  status           String            @default("em_edicao")
  dataCriacao      DateTime          @default(now())
  dataAtualizacao  DateTime
  productId        Int
  equipeDeVendaId  Int?
  isDoacao         Boolean           @default(false)
  precoAnuncio     Decimal?          @db.Decimal(10, 2)
  destaque         Boolean           @default(false)
  isActive         Boolean           @default(true)
  dadosCategoria   String?
  dataValidade     DateTime?
  fotoUrl          String?
  tabelaDePrecoId  Int?
  equipes_de_venda equipes_de_venda? @relation(fields: [equipeDeVendaId], references: [id])
}

model equipes_de_venda {
  id              Int              @id @default(autoincrement())
  lojaId          Int
  nome            String           @db.VarChar(255)
  descricao       String?
  dataCriacao     DateTime         @default(now())
  dataAtualizacao DateTime
  isActive        Boolean          @default(true)
  anuncios        anuncios[]
  lojas           lojas            @relation(fields: [lojaId], references: [id], onDelete: Cascade)
  membros_equipe  membros_equipe[]
}

model fotos_grupo {
  id          Int      @id @default(autoincrement())
  grupoId     Int
  fotoUrl     String
  ordem       Int      @default(1)
  dataCriacao DateTime @default(now())
}

model grupos_de_productos {
  id              Int      @id @default(autoincrement())
  lojaId          Int
  nome            String   @db.VarChar(255)
  descricao       String?
  dataCriacao     DateTime @default(now())
  dataAtualizacao DateTime
  isActive        Boolean  @default(true)
}

model lojas {
  id                  Int                   @id @default(autoincrement())
  nome                String                @db.VarChar(255)
  descricao           String
  email               String                @db.VarChar(255)
  endereco            String
  dataCriacao         DateTime              @default(now())
  dataAtualizacao     DateTime
  cnpjOuCpf           String                @unique @db.VarChar(18)
  site                String?               @db.VarChar(255)
  instagram           String?               @db.VarChar(255)
  facebook            String?               @db.VarChar(255)
  fotoUrl             String?
  status              String                @default("ativa")
  isActive            Boolean               @default(true)
  equipes_de_venda    equipes_de_venda[]
  movimentos_estoque  movimentos_estoque[]
  produtos_em_estoque produtos_em_estoque[]
  usuarios_lojas      usuarios_lojas[]
}

model membros_equipe {
  id               Int              @id @default(autoincrement())
  equipeId         Int
  usuarioId        Int
  dataCriacao      DateTime         @default(now())
  dataAtualizacao  DateTime
  equipes_de_venda equipes_de_venda @relation(fields: [equipeId], references: [id], onDelete: Cascade)
  usuarios         usuarios         @relation(fields: [usuarioId], references: [id], onDelete: Cascade)

  @@unique([equipeId, usuarioId])
}

model movimentos_estoque {
  id                  Int                 @id @default(autoincrement())
  lojaId              Int
  productId           Int
  tipo                String
  quantidade          Int
  motivoSaida         String?             @db.VarChar(255)
  observacoes         String?
  dataCriacao         DateTime            @default(now())
  lojas               lojas               @relation(fields: [lojaId], references: [id], onDelete: Cascade)
  produtos_em_estoque produtos_em_estoque @relation(fields: [lojaId, productId], references: [lojaId, productId], onDelete: Cascade)
  productos           productos           @relation(fields: [productId], references: [id], onDelete: Cascade)
}

model producto_visualizacoes {
  id               Int      @id @default(autoincrement())
  usuarioId        Int?
  productId        Int
  dataVisualizacao DateTime @default(now())
}

model productos {
  id                  Int                   @id @default(autoincrement())
  grupoId             Int
  nome                String                @db.VarChar(255)
  descricao           String?
  sku                 String?               @db.VarChar(100)
  dataCriacao         DateTime              @default(now())
  dataAtualizacao     DateTime
  isActive            Boolean               @default(true)
  movimentos_estoque  movimentos_estoque[]
  produtos_em_estoque produtos_em_estoque[]
}

model produtos_em_estoque {
  id                 Int                  @id @default(autoincrement())
  lojaId             Int
  productId          Int
  quantidade         Int                  @default(0)
  quantidadeMinima   Int?                 @default(0)
  quantidadeMaxima   Int?
  dataCriacao        DateTime             @default(now())
  dataAtualizacao    DateTime
  movimentos_estoque movimentos_estoque[]
  lojas              lojas                @relation(fields: [lojaId], references: [id], onDelete: Cascade)
  productos          productos            @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@unique([lojaId, productId])
}

model qr_code_chamadas {
  id          Int      @id @default(autoincrement())
  usuarioId   Int?
  qrCodeId    Int
  dataChamada DateTime @default(now())
}

model qr_codes {
  id              Int      @id @default(autoincrement())
  tabelaDePrecoId Int
  codigo          String   @unique @db.VarChar(500)
  descricao       String?
  dataCriacao     DateTime @default(now())
  dataAtualizacao DateTime
}

model tabelas_de_preco {
  id              Int      @id @default(autoincrement())
  productId       Int
  lojaId          Int
  preco           Decimal  @db.Decimal(10, 2)
  precoCusto      Decimal? @db.Decimal(10, 2)
  dataCriacao     DateTime @default(now())
  dataAtualizacao DateTime
  tamanho         String?  @db.VarChar(100)
  cor             String?  @db.VarChar(100)
  isActive        Boolean  @default(true)
}

model usuarios {
  id              Int              @id @default(autoincrement())
  nome            String           @db.VarChar(255)
  email           String           @unique @db.VarChar(255)
  senha           String           @db.VarChar(255)
  cpf             String           @db.VarChar(11)
  telefone        String           @db.VarChar(20)
  tipoUsuario     String           @default("comum")
  dataCriacao     DateTime         @default(now())
  dataAtualizacao DateTime
  endereco        String
  isActive        Boolean          @default(true)
  membros_equipe  membros_equipe[]
  usuarios_lojas  usuarios_lojas[]
}

model usuarios_lojas {
  id              Int      @id @default(autoincrement())
  usuarioId       Int
  lojaId          Int
  dataCriacao     DateTime @default(now())
  tipoUsuario     String
  dataAtualizacao DateTime
  lojas           lojas    @relation(fields: [lojaId], references: [id], onDelete: Cascade)
  usuarios        usuarios @relation(fields: [usuarioId], references: [id], onDelete: Cascade)

  @@unique([usuarioId, lojaId])
}
